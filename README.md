# Google Forms è‡ªå‹•ç”Ÿæˆç³»çµ±

ä¸€å€‹å…¨ç«¯æ‡‰ç”¨ç¨‹å¼ï¼Œç”¨æ–¼è‡ªå‹•å»ºç«‹ Google Forms è¡¨å–®ï¼Œæ”¯æ´æ‰‹å‹•å»ºç«‹å’Œè¨‚å–®å®Œæˆå¾Œè‡ªå‹•åŒ–æµç¨‹ã€‚

## ğŸŒ ç·šä¸Šç‰ˆæœ¬

- **å‰ç«¯æ‡‰ç”¨**ï¼šhttps://react-sheet-wvmz.vercel.app/
- **å¾Œç«¯ API**ï¼šhttps://peggy-google-form-generator.onrender.com

> ğŸ’¡ **æç¤º**ï¼šç·šä¸Šç‰ˆæœ¬å·²éƒ¨ç½²ä¸¦å¯ç›´æ¥ä½¿ç”¨ï¼Œç„¡éœ€æœ¬åœ°å®‰è£å³å¯é«”é©—å®Œæ•´åŠŸèƒ½ï¼

## ğŸ“‹ å°ˆæ¡ˆç°¡ä»‹

æœ¬å°ˆæ¡ˆæä¾›äº†ä¸€å€‹å®Œæ•´çš„ Google Forms è‡ªå‹•ç”Ÿæˆè§£æ±ºæ–¹æ¡ˆï¼ŒåŒ…å«ï¼š

- **å‰ç«¯ä»‹é¢**ï¼šç›´è§€çš„è¡¨å–®å»ºç«‹å·¥å…·ï¼Œæ”¯æ´å¤šç¨®å•é¡Œé¡å‹å’Œæ¨¡æ¿
- **å¾Œç«¯ API**ï¼šè™•ç† Google OAuth èªè­‰ã€è¡¨å–®å»ºç«‹ã€éƒµä»¶ç™¼é€ç­‰åŠŸèƒ½
- **è‡ªå‹•åŒ–æµç¨‹**ï¼šè¨‚å–®å®Œæˆå¾Œè‡ªå‹•å»ºç«‹è¡¨å–®ä¸¦ç™¼é€éƒµä»¶çµ¦å®¢æˆ¶
- **æ—¥èªŒè¿½è¹¤**ï¼šå®Œæ•´çš„éƒµä»¶ç™¼é€è¨˜éŒ„å’ŒæŸ¥è©¢åŠŸèƒ½

## Commit Message Style

```
feat: æ–°å¢æ–°åŠŸèƒ½
fix: ä¿®å¾©å•é¡Œ/BUG
style: ä»£ç¢¼é¢¨æ ¼ç›¸é—œç„¡å½±éŸ¿é‹è¡Œçµæœçš„
perf: å„ªåŒ–/æ€§èƒ½æå‡
refactor: é‡æ§‹
revert: æ’¤éŠ·ä¿®æ”¹
test: æ¸¬è©¦ç›¸é—œ
docs: æ–‡æª”/æ³¨é‡‹
chore: ä¾è³´æ›´æ–°/è…³æ‰‹æ¶é…ç½®ä¿®æ”¹ç­‰
workflow: å·¥ä½œæµæ”¹é€²
ci: æŒçºŒé›†æˆ
types: é¡å‹å®šç¾©æ–‡ä»¶æ›´æ”¹
wip: é–‹ç™¼ä¸­
```

## âœ¨ ä¸»è¦åŠŸèƒ½

### å‰ç«¯åŠŸèƒ½

- Google OAuth èªè­‰æ•´åˆ
- è¦–è¦ºåŒ–è¡¨å–®å»ºç«‹ä»‹é¢
- å¤šç¨®å•é¡Œé¡å‹æ”¯æ´ï¼ˆç°¡ç­”ã€å–®é¸ã€è¤‡é¸ã€æ—¥æœŸï¼‰
- è¡¨å–®æ¨¡æ¿ç³»çµ±ï¼ˆç©ºç™½è¡¨å–®ã€å®¢æˆ¶æ»¿æ„åº¦èª¿æŸ¥ã€ç”¢å“æ„è¦‹è¡¨ï¼‰
- æ˜æš—ä¸»é¡Œåˆ‡æ›
- å³æ™‚è¡¨å–®é è¦½å’Œé€£çµç”Ÿæˆ

### å¾Œç«¯åŠŸèƒ½

- Google Forms API æ•´åˆ
- OAuth 2.0 èªè­‰èˆ‡ Token ç®¡ç†
- æ‰¹æ¬¡è™•ç†è¡¨å–®å•é¡Œï¼ˆå„ªåŒ–æ•ˆèƒ½ï¼‰
- Gmail SMTP éƒµä»¶ç™¼é€
- MongoDB è³‡æ–™åº«æ•´åˆ
- éƒµä»¶æ—¥èªŒè¨˜éŒ„èˆ‡æŸ¥è©¢
- è¨‚å–®å®Œæˆè‡ªå‹•åŒ–æµç¨‹

## ğŸ›  æŠ€è¡“æ£§

### å‰ç«¯

- **æ¡†æ¶**: React 19 + TypeScript
- **å»ºç½®å·¥å…·**: Vite 7
- **æ¨£å¼**: Tailwind CSS 4
- **å‹•ç•«**: Framer Motion
- **HTTP å®¢æˆ¶ç«¯**: Axios

### å¾Œç«¯

- **æ¡†æ¶**: Node.js + Express 5
- **èªè¨€**: TypeScript
- **è³‡æ–™åº«**: MongoDB (Mongoose)
- **èªè­‰**: Google OAuth 2.0
- **API**: Google Forms API v1
- **éƒµä»¶**: Nodemailer (Gmail SMTP)

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
react-sheet/
â”œâ”€â”€ frontend/                 # React å‰ç«¯æ‡‰ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/       # React å…ƒä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ FormGenerator/    # è¡¨å–®ç”Ÿæˆå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ThemeToggle/      # ä¸»é¡Œåˆ‡æ›
â”‚   â”‚   â”‚   â””â”€â”€ FollowingPointer/ # äº’å‹•æ•ˆæœ
â”‚   â”‚   â”œâ”€â”€ App.tsx          # ä¸»æ‡‰ç”¨å…ƒä»¶
â”‚   â”‚   â””â”€â”€ main.tsx         # æ‡‰ç”¨å…¥å£
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts       # Vite è¨­å®š
â”‚
â”œâ”€â”€ backend/                 # Node.js å¾Œç«¯ API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/          # è¨­å®šæª”
â”‚   â”‚   â”‚   â”œâ”€â”€ googleAuth.ts    # Google OAuth è¨­å®š
â”‚   â”‚   â”‚   â””â”€â”€ database.ts      # MongoDB é€£ç·š
â”‚   â”‚   â”œâ”€â”€ routes/          # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts          # èªè­‰è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ form.ts          # è¡¨å–®å»ºç«‹è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ orders.ts        # è¨‚å–®è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ emailLog.ts      # éƒµä»¶æ—¥èªŒè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ services/        # æ¥­å‹™é‚è¼¯
â”‚   â”‚   â”‚   â”œâ”€â”€ orderServices.ts # è¨‚å–®æœå‹™
â”‚   â”‚   â”‚   â””â”€â”€ emailServe.ts    # éƒµä»¶æœå‹™
â”‚   â”‚   â”œâ”€â”€ models/          # è³‡æ–™æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ EmailLog.ts      # éƒµä»¶æ—¥èªŒæ¨¡å‹
â”‚   â”‚   â””â”€â”€ index.ts         # ä¼ºæœå™¨å…¥å£
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .env                 # ç’°å¢ƒè®Šæ•¸ï¼ˆéœ€è‡ªè¡Œå»ºç«‹ï¼‰
â”‚
â””â”€â”€ shared/                  # å…±äº«è³‡æº
    â””â”€â”€ templates/           # è¡¨å–®æ¨¡æ¿
        â””â”€â”€ formTemplates.ts
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ç·šä¸Šç‰ˆæœ¬ï¼ˆæ¨è–¦ï¼‰

ç›´æ¥è¨ªå• [https://react-sheet-wvmz.vercel.app/](https://react-sheet-wvmz.vercel.app/) å³å¯ä½¿ç”¨ï¼Œç„¡éœ€å®‰è£ï¼

### æ–¹å¼äºŒï¼šæœ¬åœ°é–‹ç™¼

#### å‰ç½®éœ€æ±‚

- Node.js 18+
- MongoDB è³‡æ–™åº«
- Google Cloud Platform å°ˆæ¡ˆï¼ˆç”¨æ–¼ OAuthï¼‰
- Gmail æ‡‰ç”¨ç¨‹å¼å¯†ç¢¼ï¼ˆç”¨æ–¼éƒµä»¶ç™¼é€ï¼‰

### 1. å®‰è£ä¾è³´

```bash
# å®‰è£å¾Œç«¯ä¾è³´
cd backend
npm install

# å®‰è£å‰ç«¯ä¾è³´
cd ../frontend
npm install
```

### 2. ç’°å¢ƒè®Šæ•¸è¨­å®š

åœ¨ `backend/` ç›®éŒ„ä¸‹å»ºç«‹ `.env` æª”æ¡ˆï¼š

```env
# ä¼ºæœå™¨è¨­å®š
PORT=3001
FRONTEND_URL=http://localhost:5173

# MongoDB é€£ç·š
MONGODB_URI=mongodb://localhost:27017/react-sheet

# Google OAuth è¨­å®š
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URI=http://localhost:3001/auth/google/callback

# Gmail SMTP è¨­å®š
GMAIL_USER=your_email@gmail.com
GMAIL_APP_PASSWORD=your_app_password
```

### 3. Google Cloud Platform è¨­å®š

1. å‰å¾€ [Google Cloud Console](https://console.cloud.google.com/)
2. å»ºç«‹æ–°å°ˆæ¡ˆæˆ–é¸æ“‡ç¾æœ‰å°ˆæ¡ˆ
3. å•Ÿç”¨ **Google Forms API** å’Œ **Google Drive API**
4. å»ºç«‹ OAuth 2.0 æ†‘è­‰
5. è¨­å®šæˆæ¬Šé‡æ–°å°å‘ URIï¼š`http://localhost:3001/auth/google/callback`
6. ä¸‹è¼‰æ†‘è­‰ JSON æª”æ¡ˆï¼Œæ”¾ç½®æ–¼ `backend/client-secret.json`

### 4. å•Ÿå‹•æ‡‰ç”¨

```bash
# çµ‚ç«¯æ©Ÿ 1ï¼šå•Ÿå‹•å¾Œç«¯ä¼ºæœå™¨
cd backend
npm run dev

# çµ‚ç«¯æ©Ÿ 2ï¼šå•Ÿå‹•å‰ç«¯é–‹ç™¼ä¼ºæœå™¨
cd frontend
npm run dev
```

æ‡‰ç”¨ç¨‹å¼å°‡åœ¨ä»¥ä¸‹ä½ç½®é‹è¡Œï¼š

- å‰ç«¯ï¼šhttp://localhost:5173
- å¾Œç«¯ï¼šhttp://localhost:3001

## ğŸ“¡ API ç«¯é»

### èªè­‰ç›¸é—œ

- `GET /auth/google` - å–å¾— Google OAuth èªè­‰ URL
- `GET /auth/google/callback` - OAuth å›èª¿è™•ç†
- `GET /auth/status` - æª¢æŸ¥èªè­‰ç‹€æ…‹

### è¡¨å–®ç›¸é—œ

- `POST /api/forms/create` - å»ºç«‹ Google è¡¨å–®
  ```json
  {
    "title": "è¡¨å–®æ¨™é¡Œ",
    "description": "è¡¨å–®èªªæ˜",
    "questions": [
      {
        "text": "å•é¡Œå…§å®¹",
        "type": "text|multipleChoice|checkbox|date",
        "required": true,
        "options": ["é¸é …1", "é¸é …2"] // åƒ…å–®é¸/è¤‡é¸éœ€è¦
      }
    ]
  }
  ```

### è¨‚å–®ç›¸é—œ

- `POST /api/orders/completed` - è™•ç†è¨‚å–®å®Œæˆäº‹ä»¶
  ```json
  {
    "orderId": "ORDER123",
    "customerEmail": "customer@example.com",
    "customerName": "å®¢æˆ¶åç¨±",
    "orderDetails": {},
    "templateId": "product-feedback" // å¯é¸
  }
  ```

### éƒµä»¶æ—¥èªŒç›¸é—œ

- `GET /api/emailLog/logs` - æŸ¥è©¢æ‰€æœ‰éƒµä»¶ç´€éŒ„ï¼ˆæ”¯æ´åˆ†é ï¼‰
  - Query: `?page=1&limit=50`
- `GET /api/emailLog/logs/order/:orderId` - æ ¹æ“šè¨‚å–® ID æŸ¥è©¢
- `GET /api/emailLog/logs/email/:email` - æ ¹æ“šéƒµä»¶åœ°å€æŸ¥è©¢
- `GET /api/emailLog/logs/status/:status` - æ ¹æ“šç‹€æ…‹æŸ¥è©¢ï¼ˆsuccess/failedï¼‰
- `GET /api/emailLog/logs/stats` - å–å¾—çµ±è¨ˆè³‡è¨Š

### å¥åº·æª¢æŸ¥

- `GET /api/health` - ä¼ºæœå™¨å¥åº·ç‹€æ…‹

## ğŸ’¡ ä½¿ç”¨èªªæ˜

### æ‰‹å‹•å»ºç«‹è¡¨å–®

1. é–‹å•Ÿå‰ç«¯æ‡‰ç”¨ï¼ˆhttp://localhost:5173ï¼‰
2. é»æ“Šã€Œä½¿ç”¨ Google å¸³è™Ÿç™»å…¥ã€é€²è¡Œèªè­‰
3. é¸æ“‡è¡¨å–®æ¨¡æ¿æˆ–ä½¿ç”¨ç©ºç™½è¡¨å–®
4. å¡«å¯«è¡¨å–®æ¨™é¡Œå’Œèªªæ˜
5. æ–°å¢å•é¡Œä¸¦è¨­å®šé¡å‹ï¼š
   - **ç°¡ç­”**ï¼šæ–‡å­—è¼¸å…¥
   - **å–®é¸**ï¼šå–®é¸é¸é …ï¼ˆéœ€æ–°å¢é¸é …ï¼‰
   - **è¤‡é¸**ï¼šå¤šé¸é¸é …ï¼ˆéœ€æ–°å¢é¸é …ï¼‰
   - **æ—¥æœŸ**ï¼šæ—¥æœŸé¸æ“‡å™¨
6. é»æ“Šã€Œå»ºç«‹ Google è¡¨å–®ã€
7. å–å¾—è¡¨å–®é€£çµä¸¦å¯è¤‡è£½åˆ†äº«

### è‡ªå‹•åŒ–æµç¨‹ï¼ˆè¨‚å–®å®Œæˆï¼‰

ç•¶è¨‚å–®å®Œæˆæ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•ï¼š

1. æ ¹æ“šæ¨¡æ¿å»ºç«‹ Google è¡¨å–®
2. æº–å‚™ HTML éƒµä»¶å…§å®¹
3. é€é Gmail SMTP ç™¼é€éƒµä»¶çµ¦å®¢æˆ¶
4. è¨˜éŒ„åˆ° MongoDB è³‡æ–™åº«

ç¯„ä¾‹ API å‘¼å«ï¼š

```bash
curl -X POST http://localhost:3001/api/orders/completed \
  -H "Content-Type: application/json" \
  -d '{
    "orderId": "ORDER123",
    "customerEmail": "customer@example.com",
    "customerName": "å¼µä¸‰"
  }'
```

## ğŸ”§ æŠ€è¡“ç´°ç¯€

### æ‰¹æ¬¡è™•ç†å„ªåŒ–

å°ˆæ¡ˆä½¿ç”¨ Google Forms API çš„ `batchUpdate` æ–¹æ³•é€²è¡Œæ‰¹æ¬¡è™•ç†ï¼Œå°‡æ‰€æœ‰å•é¡Œåˆä½µåˆ°ä¸€æ¬¡ API å‘¼å«ä¸­ï¼š

**å„ªå‹¢ï¼š**

- âœ… **æ•ˆèƒ½æå‡**ï¼šæ¸›å°‘ API å‘¼å«æ¬¡æ•¸ï¼ˆå¾ N æ¬¡æ¸›å°‘åˆ° 1 æ¬¡ï¼‰
- âœ… **åŸå­æ€§**ï¼šæ‰€æœ‰æ“ä½œè¦éº¼å…¨éƒ¨æˆåŠŸï¼Œè¦éº¼å…¨éƒ¨å¤±æ•—
- âœ… **é™ä½å»¶é²**ï¼šæ¸›å°‘ç¶²è·¯å¾€è¿”æ™‚é–“
- âœ… **é¿å…é€Ÿç‡é™åˆ¶**ï¼šæ¸›å°‘è§¸ç™¼ Google API é€Ÿç‡é™åˆ¶çš„é¢¨éšª

### Token ç®¡ç†

- OAuth Token å„²å­˜åœ¨ `backend/token.json`
- è‡ªå‹•æª¢æ¸¬ Token éæœŸä¸¦åˆ·æ–°
- æ”¯æ´é›¢ç·šå­˜å–ï¼ˆoffline accessï¼‰

### è¡¨å–®æ¨¡æ¿ç³»çµ±

æ¨¡æ¿å®šç¾©åœ¨ `shared/templates/formTemplates.ts`ï¼ŒåŒ…å«ï¼š

- ç©ºç™½è¡¨å–®
- å®¢æˆ¶æ»¿æ„åº¦èª¿æŸ¥è¡¨
- ç”¢å“æ„è¦‹è¡¨

å¯è¼•é¬†æ“´å……æ–°æ¨¡æ¿ã€‚

## ğŸ“ é–‹ç™¼èªªæ˜

### å¾Œç«¯é–‹ç™¼

```bash
cd backend
npm run dev  # é–‹ç™¼æ¨¡å¼ï¼ˆè‡ªå‹•é‡è¼‰ï¼‰
npm start    # ç”Ÿç”¢æ¨¡å¼
```

### å‰ç«¯é–‹ç™¼

```bash
cd frontend
npm run dev    # é–‹ç™¼ä¼ºæœå™¨
npm run build  # å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬
npm run preview # é è¦½ç”Ÿç”¢ç‰ˆæœ¬
```

## ğŸš¢ éƒ¨ç½²èªªæ˜

### å‰ç«¯éƒ¨ç½²ï¼ˆVercelï¼‰

1. å°‡å°ˆæ¡ˆæ¨é€åˆ° GitHub
2. åœ¨ [Vercel](https://vercel.com) åŒ¯å…¥å°ˆæ¡ˆ
3. è¨­å®š Root Directory ç‚º `frontend`
4. æ–°å¢ç’°å¢ƒè®Šæ•¸ï¼š
   - `VITE_API_URL` = `https://peggy-google-form-generator.onrender.com`
5. éƒ¨ç½²å®Œæˆ

### å¾Œç«¯éƒ¨ç½²ï¼ˆRenderï¼‰

1. åœ¨ [Render](https://render.com) å»ºç«‹æ–°çš„ Web Service
2. é€£æ¥ GitHub å„²å­˜åº«
3. è¨­å®šï¼š
   - Build Command: `cd backend && npm install`
   - Start Command: `cd backend && npm start`
   - Root Directory: `backend`
4. æ–°å¢ç’°å¢ƒè®Šæ•¸ï¼š
   - `FRONTEND_URL` = `https://react-sheet-wvmz.vercel.app`
   - `GOOGLE_REDIRECT_URI` = `https://peggy-google-form-generator.onrender.com/auth/google/callback`
   - `GOOGLE_CLIENT_ID` = ä½ çš„ Google Client ID
   - `GOOGLE_CLIENT_SECRET` = ä½ çš„ Google Client Secret
   - `MONGODB_URI` = ä½ çš„ MongoDB é€£ç·šå­—ä¸²
   - `GMAIL_USER` = ä½ çš„ Gmail å¸³è™Ÿ
   - `GMAIL_APP_PASSWORD` = ä½ çš„ Gmail æ‡‰ç”¨ç¨‹å¼å¯†ç¢¼
5. ä¸Šå‚³ `backend/client-secret.json` åˆ° Renderï¼ˆé€éç’°å¢ƒè®Šæ•¸æˆ– Secretsï¼‰
6. åœ¨ Google Cloud Console æ–°å¢ Redirect URIï¼š`https://peggy-google-form-generator.onrender.com/auth/google/callback`

## ğŸ”’ å®‰å…¨æ€§æ³¨æ„äº‹é …

- âš ï¸ ä¸è¦å°‡ `.env` æª”æ¡ˆæäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- âš ï¸ `token.json` å’Œ `client-secret.json` æ‡‰åŠ å…¥ `.gitignore`
- âš ï¸ ç”Ÿç”¢ç’°å¢ƒè«‹ä½¿ç”¨ HTTPS
- âš ï¸ å¦¥å–„ä¿ç®¡ Gmail æ‡‰ç”¨ç¨‹å¼å¯†ç¢¼

## ğŸ“„ æˆæ¬Š

ISC License

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ è¯çµ¡æ–¹å¼

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹é–‹å•Ÿ Issueã€‚

---

**æ³¨æ„**ï¼šæœ¬å°ˆæ¡ˆéœ€è¦æœ‰æ•ˆçš„ Google Cloud Platform å°ˆæ¡ˆå’Œ MongoDB è³‡æ–™åº«æ‰èƒ½æ­£å¸¸é‹è¡Œã€‚
